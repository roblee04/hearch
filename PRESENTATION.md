# Hearch: A Serendipitous Search Engine
## Computational Creativity Project Presentation

---

## Project Overview

**Hearch** is a serendipity-focused search engine designed to surface surprising, creative, and unexpected search results rather than just the most "relevant" ones. Unlike traditional search engines that optimize purely for relevance and popularity, Hearch embraces computational creativity principles to help users discover content they didn't know they were looking for.

### Core Philosophy
> "The best search results aren't always the most obvious ones."

Traditional search engines like Google optimize for:
- **Relevance**: Exact matches to user intent
- **Popularity**: High-authority, frequently-visited pages
- **Commercial value**: Ad-supported, SEO-optimized content

Hearch optimizes for:
- **Serendipity**: Unexpected but valuable discoveries
- **Diversity**: Varied perspectives and content types
- **Quality**: Well-written, thoughtful content over commercial spam
- **Creativity**: Alternative angles and unique viewpoints

---

## Computational Creativity Aspects

### 1. **Creative Query Expansion with LLMs**

The system uses Large Language Models to creatively reinterpret user queries:

**Example:**
```
User Query: "potatoes"

Expanded Queries (Generated by LLM):
1. "potato cultivation throughout history"
2. "unexpected uses for potatoes in science"
3. "cultural significance of potatoes worldwide"
4. "potato-based art and creativity"
5. "potatoes in literature and metaphor"
```

**Why this is Computationally Creative:**
- **Conceptual Blending**: Combines the original concept with unexpected domains (art, history, science)
- **Divergent Thinking**: Explores multiple directions rather than converging on one "correct" answer
- **Reframing**: Transforms simple queries into richer, more exploratory searches
- **Surprise Generation**: Deliberately aims to surface unexpected connections

### 2. **Anti-Popularity Bias (Marginalia-Inspired Ranking)**

Traditional search rewards popularity; Hearch rewards **interestingness**:

| Traditional Search | Hearch |
|-------------------|---------|
| Prioritizes high-traffic sites | Penalizes commercial features |
| Favors SEO-optimized content | Rewards unique, personal content |
| Wikipedia always on top | Diverse, lesser-known sources |
| Ad-heavy pages rank well | "Anti-bullshit" penalties applied |

**Creative Principle**: *Computational serendipity through deliberate unpredictability*

### 3. **Curated Seed Discovery**

Unlike broad web crawlers, Hearch starts from manually curated "interesting" seeds:
- Personal blogs
- Academic projects
- Niche communities
- Creative portfolios
- Unconventional perspectives

**Creative Principle**: *Human-guided machine discovery* - combining human curation with computational scale

### 4. **Multi-Query Result Fusion**

Results from multiple expanded queries are merged and re-ranked, creating a **combinatorial creativity** effect:
- Single query → Multiple perspectives
- Multiple perspectives → Surprising intersections
- Surprising intersections → Serendipitous discoveries

---

## System Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                         USER INTERFACE                          │
│                    (Flask Web Application)                      │
└────────────────────────┬────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                    QUERY EXPANSION LAYER                        │
│  ┌──────────────┐  ┌──────────────┐  ┌───────────────────┐    │
│  │   Ollama     │  │   OpenAI     │  │  Fallback Rules   │    │
│  │   (Local)    │  │  (API-based) │  │   (No LLM)        │    │
│  └──────────────┘  └──────────────┘  └───────────────────┘    │
│           │                │                    │                │
│           └────────────────┴────────────────────┘                │
│                            │                                     │
│                  Original Query + 4-5 Expanded Queries          │
└────────────────────────┬────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                     SEARCH ENGINE CORE                          │
│                                                                 │
│  ┌───────────────────────────────────────────────────────┐    │
│  │              INDEXING & RETRIEVAL                     │    │
│  │  • TF-IDF Vectorization (scikit-learn)               │    │
│  │  • Inverted Index                                     │    │
│  │  • BM25 Baseline Scoring                             │    │
│  └───────────────────────────────────────────────────────┘    │
│                            │                                    │
│  ┌───────────────────────────────────────────────────────┐    │
│  │         SERENDIPITY RANKING ALGORITHM                 │    │
│  │                                                        │    │
│  │  Relevance Score = Domain × (BM25 + Flags + Verbatim │    │
│  │                    + Proximity + Position)            │    │
│  │                                                        │    │
│  │  Penalties = -(Anti-Bullshit + Quality + Length)     │    │
│  │                                                        │    │
│  │  Final Score = √[(1 + 500 + 10×Penalties) /          │    │
│  │                  (1 + Relevance)]                     │    │
│  └───────────────────────────────────────────────────────┘    │
└────────────────────────┬────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                      RESULT FUSION                              │
│  • Merge results from all expanded queries                     │
│  • Remove duplicates                                            │
│  • Re-rank with diversity penalty                              │
│  • Return top-k serendipitous results                          │
└─────────────────────────────────────────────────────────────────┘
```

### Data Pipeline

```
┌──────────────┐
│  Seed URLs   │  (Manually curated interesting sites)
└──────┬───────┘
       │
       ▼
┌──────────────┐
│   Crawler    │  (BFS/DFS with depth & page limits)
└──────┬───────┘
       │
       ▼
┌──────────────┐
│  HTML Parser │  (Extract content + metadata)
└──────┬───────┘
       │
       ▼
┌──────────────────────────────────────────────────┐
│  Metadata Extraction:                            │
│  • Content (cleaned text)                        │
│  • Word location flags (TITLE, HEADING, etc.)   │
│  • HTML features (ADS, POPUPS, etc.)            │
│  • Document quality metrics                      │
│  • Average sentence length                       │
│  • Publication year                              │
└──────┬───────────────────────────────────────────┘
       │
       ▼
┌──────────────┐
│   Parquet    │  (Efficient storage format)
│   Dataset    │
└──────────────┘
```

---

## Key Computational Creativity Techniques

### 1. **Conceptual Expansion (Exploratory Creativity)**

**Technique**: LLM-based query transformation
```python
expand_query("machine learning")
→ [
    "history of artificial neural networks",
    "machine learning in unexpected domains",
    "philosophical implications of AI",
    "DIY machine learning projects",
    "machine learning failures and limitations"
  ]
```

**Creativity Type**: **Exploratory** - Navigates the conceptual space around a topic

### 2. **Value Inversion (Transformational Creativity)**

**Technique**: Inverting traditional search engine values
- **Traditional**: Reward popularity → **Hearch**: Penalize commercial spam
- **Traditional**: Favor authority → **Hearch**: Favor uniqueness
- **Traditional**: Optimize CTR → **Hearch**: Optimize serendipity

**Creativity Type**: **Transformational** - Changes the rules of the search game

### 3. **Combinatorial Discovery (Combinational Creativity)**

**Technique**: Merging results from multiple query interpretations
- Query 1 results: {A, B, C, D, E}
- Query 2 results: {B, F, G, H}
- Query 3 results: {D, H, I, J, K}
- **Combined**: {A, B, C, D, E, F, G, H, I, J, K} with diversity-aware ranking

**Creativity Type**: **Combinational** - Novel combinations of existing elements

### 4. **Human-AI Collaboration**

**Technique**: Curated seeds + Computational expansion
- **Human**: Selects interesting starting points (blogs, personal sites, niche communities)
- **AI**: Expands via crawling and creative query expansion
- **Synergy**: Human taste + Machine scale = Computational serendipity

**Creativity Type**: **Collaborative** - Augmented human creativity

---

## Technical Implementation

### Core Technologies

| Component | Technology | Purpose |
|-----------|-----------|---------|
| **Backend** | Python 3.10+ | Core engine logic |
| **Web Framework** | Flask | API and web interface |
| **Search Engine** | scikit-learn (TF-IDF, BM25) | Text retrieval |
| **Query Expansion** | Ollama / OpenAI | Creative query generation |
| **Data Storage** | Parquet (pandas) | Efficient dataset storage |
| **Web Crawling** | Requests + BeautifulSoup | Content acquisition |
| **Frontend** | HTML/CSS/JavaScript | Modern, responsive UI |

### Key Algorithms

#### 1. **BM25 + Marginalia Hybrid Ranking**

```
Final Score = √[(1 + 500 + 10 × Penalties) / (1 + Relevance Score)]

Where:
  Relevance = Domain_Factor × (BM25 + Location_Bonus + Verbatim + 
                               Proximity + Position)
  
  Penalties = -(Ads + Popups + Trackers + Low_Quality + 
                Short_Length + Poor_Sentences)
```

**Why Sqrt Inversion?**
- Lower "relevance" → Higher score (rewards underdog content)
- High penalties → Lower score (punishes spam)
- Creates a **surprise bias** while maintaining quality

#### 2. **Query Expansion Algorithm**

```python
def expand_query(query):
    # 1. LLM generates creative alternatives
    expanded = llm.generate(
        f"Generate 4 creative, serendipitous alternatives to: {query}",
        temperature=0.8  # High temperature = more creative
    )
    
    # 2. Search all queries
    all_results = []
    for q in [query] + expanded:
        results = search_engine.search(q)
        all_results.extend(results)
    
    # 3. Merge with diversity
    return merge_and_rerank(all_results, diversity_weight=0.3)
```

---

## How This Advances Computational Creativity

### 1. **Creativity as a Search Goal** (Not Just an Accident)

Most search engines aim for **precision** (find exactly what you asked for).
Hearch aims for **creative inspiration** (find what you didn't know you needed).

**Novel Contribution**: Treating serendipity as a first-class optimization target, not a side effect.

### 2. **LLMs for Conceptual Exploration**

Using LLMs not for factual Q&A, but for **creative reframing**:
- Traditional use: "What is X?" → Factual answer
- Creative use: "What is X?" → "What are 5 unexpected angles on X?"

**Novel Contribution**: LLMs as creativity amplifiers for information retrieval.

### 3. **Anti-Mainstream Bias in Information Systems**

Most AI systems learn to mimic the mainstream (trained on popular data).
Hearch actively **resists the mainstream** through:
- Manual curation of non-commercial seeds
- Penalties for commercial features
- Rewards for unique, personal content

**Novel Contribution**: Deliberate algorithmic counter-culture.

### 4. **Human-AI Creative Partnership**

Neither fully automated nor fully manual:
- **Human**: Provides taste, curation, values
- **Machine**: Provides scale, exploration, combination
- **Result**: Creative search that machines alone couldn't achieve

**Novel Contribution**: A model for human-guided computational creativity.

---

## Evaluation & Effectiveness

### Qualitative Goals (Hard to Measure, Easy to Experience)

✓ **Surprise**: Do results contain unexpected but valuable information?
✓ **Diversity**: Do results cover varied perspectives and content types?
✓ **Quality**: Are results well-written and thoughtful?
✓ **Discovery**: Do users find things they wouldn't have found otherwise?

### Quantitative Metrics (Could Be Implemented)

- **Diversity Score**: Cosine distance between result documents
- **Anti-Popularity Score**: % of results from low-traffic sites
- **Query Expansion Diversity**: Semantic distance between original and expanded queries
- **User Engagement**: Time spent exploring results (proxy for interest)

### Known Limitations

1. **Small Index**: Limited to crawled content (not web-scale)
2. **Slow Indexing**: Real-time web crawling is computationally expensive
3. **Single-Word Bias**: Reverse index works better for single terms
4. **Subjectivity**: "Interesting" is hard to define objectively

---

## Future Directions

### 1. **Adaptive Serendipity**
Learn user preferences for surprise vs. relevance over time.

### 2. **Multi-Modal Creativity**
Expand to images, videos, audio with creative search.

### 3. **Collaborative Filtering**
"Users who found X surprising also discovered Y"

### 4. **Meta-Search Creativity**
Apply creative expansion to existing search engines (Google, Bing) as a proxy layer.

### 5. **Gamification**
"Serendipity score" for users who discover the most unexpected but valuable content.

---

## Conclusion

**Hearch demonstrates that:**

1. **Search engines don't have to be boring** - Serendipity can be a design goal
2. **LLMs enable creative information retrieval** - Not just question answering
3. **Computational creativity needs human taste** - Curation + Scale = Discovery
4. **Inversion can be innovative** - Opposite of mainstream can be valuable

**Core Insight**: 
> The most creative search results often come from deliberately NOT giving users exactly what they asked for.

---

## References & Inspiration

- **MarginaliaSearch**: Anti-commercial search engine with quality focus
  - https://search.marginalia.nu/
- **Wiby.me**: Surprising search for the "old web"
  - https://wiby.me/
- **Alex Molas's Microsearch**: Minimalist search engine base
  - https://github.com/alexmolas/microsearch
- **StumbleUpon** (RIP): The OG serendipity engine
- **Boden's Creativity Theory**: Exploratory, Combinational, Transformational
  - M. Boden, "The Creative Mind: Myths and Mechanisms" (2004)

---

## Technical Demo Points

### 1. **Live Query Expansion Demo**
```bash
python src/microsearch/query_expansion.py
```
Shows real-time LLM creativity in action.

### 2. **Ranking Algorithm Transparency**
Show how the same query gets different results with/without penalties.

### 3. **Crawling Strategy Visualization**
Visualize how seed URLs expand into a discovery network.

### 4. **Before/After Comparison**
Compare results with Google to show difference in discovery potential.

---

## Key Takeaways for Presentation

1. **Problem**: Traditional search is too predictable and commercialized
2. **Solution**: Computational creativity through serendipity-optimized search
3. **Innovation**: LLM-based query expansion + anti-mainstream ranking
4. **Impact**: Helps users discover unexpected, valuable content
5. **Future**: A model for creative information systems

**Tagline**: *"Finding what you weren't looking for, computationally."*

---

## Contact & Links

- **GitHub**: https://github.com/roblee04/hearch
- **Live Demo**: [Include if deployed]
- **Authors**: Robin Lee & Harsh [Last Name]
- **Course**: Computational Creativity
- **Date**: November 2025

